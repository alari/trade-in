var iPhone=(window.orientation!=undefined);var message={name:"Представьтесь пожалуйста",phone:"Введите номер телефона",brand:"Выберите марку",model:"Выберите модель",email:"Введите email",email2:"Некорректный email"};var t;document.observe("dom:loaded",function(){Event.observe("form_callboard","submit",checkForm);Event.observe("button_callboard_send","click",function(){});Event.observe("phone","keypress",isPhoneKey);Event.observe("phone","keyup",isPhoneKey);Event.observe("phone","keydown",isPhoneKey)});document.on("mousemove",function(){countRequest=0});document.on("scroll",function(){countRequest=0});function checkForm(a){if(validation()){$("button_callboard_send").disable().addClassName("disable");new Ajax.Request("/send/",{asynchronous:true,method:"post",parameters:$("form_callboard").serialize(true)})}Event.stop(a)}function isPhoneKey(b){var a=(b.which)?b.which:event.keyCode;if((a>31&&(a>57))){if(a!=189&&a!=40&&a!=41&&a!=187){event.stop();return false}}return true}function form_callboard_reset(){Form.reset("form_callboard");$("form_callboard").reset()}function checkEmailCallboard(b){var a=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(b.match(a)){return true}else{return false}}function validation(){$$("#form_callboard .error").each(function(b){b.remove()});var a=true;$$("#form_callboard .required").each(function(b){if(b.getValue()==""){a=false;b.up(0).addClassName("red");b.addClassName("form-error");$("cont_button_callboard_send").insert({before:new Element("div",{"class":"tc bg-gray pb-20 font-16 red normal",id:"callboard_error_message"}).update(message[b.id])});throw $break}else{if(b.id=="email"){if(!checkEmailCallboard(b.getValue())){a=false;$("cont_button_callboard_send").insert({before:new Element("div",{"class":"tc bg-gray pb-20 font-16 red normal",id:"callboard_error_message"}).update(message.email2)});b.addClassName("form-error");b.up(0).addClassName("red");throw $break}}else{b.up(0).removeClassName("red");b.removeClassName("form-error");if($("callboard_error_message")){$("callboard_error_message").remove()}}}});return a}function check_update(a,b){var c=new Date();new Ajax.Request("/sales/a_check/",{asynchronous:true,method:"post",parameters:{last_id:a,time:b,authenticity_token:AUTH_TOKEN},})};